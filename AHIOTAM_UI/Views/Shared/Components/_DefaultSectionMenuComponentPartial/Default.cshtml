@model List<ResultMenuWithCategoryDto>
@{
    bool isFirst = true;

    // Filter and group categories that have at least one active menu item (MenuStatus == true)
    var categories = Model.Where(m => m.MenuStatus == true)
                          .GroupBy(x => new { x.CategoryElementId, x.CategoryName, x.CategoryStatus })
                          .Select(g => new { g.Key.CategoryElementId, g.Key.CategoryName, g.Key.CategoryStatus })
                          .ToList();
}

@* _DefaultSectionMenuComponentPartial *@

<section class="site-section" id="section-menu">
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center mb-5 site-animate">
                <h2 class="display-4">Menümüz</h2>
                <div class="row justify-content-center">
                    <div class="col-md-7">
                        <p class="lead">
                            Yöremize özgü en güzel menüler burada
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-12 text-center">
                <ul class="nav site-tab-nav nav-pills mb-5" id="pills-tab" role="tablist">
                    @foreach (var cat in categories.Where(c => c.CategoryStatus))
                    {
                        <li class="nav-item site-animate">
                            <a class="nav-link @(isFirst ? "active" : "")"
                               id="pills-@cat.CategoryElementId-tab"
                               data-toggle="pill"
                               href="#pills-@cat.CategoryElementId"
                               role="tab"
                               aria-controls="pills-@cat.CategoryElementId"
                               aria-selected="@(isFirst ? "true" : "false")">
                                @cat.CategoryName
                            </a>
                        </li>
                        isFirst = false;
                    }
                </ul>

                <div class="tab-content text-left" id="pills-tabContent">
                    @{
                        isFirst = true;
                    }
                    @foreach (var cat in categories.Where(c => c.CategoryStatus))
                    {
                        <div class="tab-pane fade @(isFirst ? "show active" : "")"
                             id="pills-@cat.CategoryElementId"
                             role="tabpanel"
                             aria-labelledby="pills-@cat.CategoryElementId-tab">
                            <div class="row">
                                @foreach (var menu in Model.Where(m => m.CategoryElementId == cat.CategoryElementId && m.MenuStatus))
                                {
                                    <div class="col-md-6 site-animate">
                                        <div class="media menu-item">
                                            <img class="mr-3 img-fluid" src="@menu.FoodImageUrl" alt="@menu.FoodTitle" />
                                            <div class="media-body">
                                                <h5 class="mt-0">@menu.FoodTitle</h5>
                                                <p>@menu.FoodDescription</p>
                                                <h6 class="text-primary menu-price">@menu.FoodPrice.ToString("C")</h6>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                        isFirst = false;
                    }
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    /* Kategori sekmeleri için hover efekti */
    /* Kategori sekmeleri için hover efekti */
    .site-tab-nav .nav-link {
        transition: all 0.3s ease;
        border-radius: 30px;
        padding: 10px 20px;
        color: #333 !important;
        background-color: transparent !important;
    }

        .site-tab-nav .nav-link:hover {
            background-color: #f1f5f9 !important; /* Açık gri arka plan */
            color: #0d9488 !important; /* Tailwind teal-600 tonu */
            transform: scale(1.05);
        }

        /* Aktif kategori sekmesi için */
        .site-tab-nav .nav-link.active {
            background-color: #0d9488 !important;
            color: #fff !important;
            box-shadow: 0 4px 10px rgba(13, 148, 136, 0.4);
        }

        .site-tab-nav .nav-link:focus,
        .site-tab-nav .nav-link:active {
            outline: none !important;
            background-color: #0d9488 !important;
            color: #fff !important;
        }
</style>